"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[3281],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=c(n),m=r,k=d["".concat(s,".").concat(m)]||d[m]||u[m]||i;return n?a.createElement(k,l(l({ref:t},p),{},{components:n})):a.createElement(k,l({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var c=2;c<i;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3919:function(e,t,n){function a(e){return!0===/^(\w*:|\/\/)/.test(e)}function r(e){return void 0!==e&&!a(e)}n.d(t,{b:function(){return a},Z:function(){return r}})},4996:function(e,t,n){n.d(t,{C:function(){return i},Z:function(){return l}});var a=n(2263),r=n(3919);function i(){var e=(0,a.Z)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,n=void 0===t?"/":t,i=e.url;return{withBaseUrl:function(e,t){return function(e,t,n,a){var i=void 0===a?{}:a,l=i.forcePrependBaseUrl,o=void 0!==l&&l,s=i.absolute,c=void 0!==s&&s;if(!n)return n;if(n.startsWith("#"))return n;if((0,r.b)(n))return n;if(o)return t+n;var p=n.startsWith(t)?n:t+n.replace(/^\//,"");return c?e+p:p}(i,n,e,t)}}}function l(e,t){return void 0===t&&(t={}),(0,i().withBaseUrl)(e,t)}},7233:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return d}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),l=["components"],o={id:"aws-deployment",title:"Deploy Xest API Project to AWS ElasticBeanstalk",sidebar_label:"AWS Deployment"},s=void 0,c={unversionedId:"aws-deployment",id:"aws-deployment",isDocsHomePage:!1,title:"Deploy Xest API Project to AWS ElasticBeanstalk",description:"Deploying a Xest project to AWS is straightforward with the Xest CLI. Follow these steps to set up your environment and deploy your project.",source:"@site/docs/aws.md",sourceDirName:".",slug:"/aws-deployment",permalink:"/docs/aws-deployment",editUrl:"https://github.com/CyprusCodes/xest/tree/main/documentation/docs/docs/aws.md",tags:[],version:"current",frontMatter:{id:"aws-deployment",title:"Deploy Xest API Project to AWS ElasticBeanstalk",sidebar_label:"AWS Deployment"},sidebar:"docs",previous:{title:"Digital Ocean",permalink:"/docs/digital-ocean"},next:{title:"Run Schema and Seed",permalink:"/docs/run-schema-and-seed"}},p=[{value:"Setting Up Additional AWS Services",id:"setting-up-additional-aws-services",children:[{value:"Setting Up a New Public Hosted Zone on Route 53",id:"setting-up-a-new-public-hosted-zone-on-route-53",children:[],level:3},{value:"Setting Up an ACM Wildcard Certificate",id:"setting-up-an-acm-wildcard-certificate",children:[],level:3},{value:"Setting Up an IAM User with Admin Access",id:"setting-up-an-iam-user-with-admin-access",children:[],level:3},{value:"Setting Up AWS Credentials in CircleCI Project Settings",id:"setting-up-aws-credentials-in-circleci-project-settings",children:[],level:3}],level:2}],u={toc:p};function d(e){var t=e.components,o=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Deploying a Xest project to AWS is straightforward with the Xest CLI. Follow these steps to set up your environment and deploy your project."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Step 1:")," Create an Amazon Web Services Account"),(0,i.kt)("p",null,"If you don't have an AWS account yet, you can create one here: ",(0,i.kt)("a",{parentName:"p",href:"https://aws.amazon.com/"},"AWS"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Step 2:")," Deploy Your Xest Project to AWS"),(0,i.kt)("p",null,"Run the following command to start the deployment process:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"xx deploy\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Step 3:")," Choose AWS as the Deployment Platform"),(0,i.kt)("p",null,"The Xest CLI will present you with options. Use the arrow keys to select AWS:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Starting deployment...\n? Select the deployment platform (Use arrow keys)\n Digital Ocean\n\u276f  AWS\n")),(0,i.kt)("p",null,"After choosing AWS, some stacks will start installing"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Installing AWS CDK packages...\n...\n...\nCreating stack directory and files...\nAWS CDK setup complete. Files created successfully.\nPlease go to the variables.ts file inside the stack directory to make the necessary changes.\nDeployment files created successfully for AWS.\n")),(0,i.kt)("p",null,"Once the installation is complete, two directories will be generated: ",(0,i.kt)("inlineCode",{parentName:"p"},".circleci")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"stack"),"."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},".circleci")," directory will contain all the necessary configurations inside ",(0,i.kt)("inlineCode",{parentName:"p"},"config.yml"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Step 4:")," Update the ",(0,i.kt)("inlineCode",{parentName:"p"},"variables.ts")," File"),(0,i.kt)("p",null,"The stack directory will contain five files. The variables.ts file is where you need to make your variable changes."),(0,i.kt)("img",{style:{margin:"20px 20px"},alt:"Xest Logo",width:"70%",src:n(4996).Z("img/stack.png")}),(0,i.kt)("p",null,"Example Changes in ",(0,i.kt)("inlineCode",{parentName:"p"},"variables.ts")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'const sslArn: string =\n  "arn:aws:acm:eu-west-2:XXXXXX:certificate/xxxxx-xxxxx-xxxx-xxxxx";\n\nconst officeIpCode: string = "xxx.xxx.xxxx.xx/32";\n')),(0,i.kt)("h2",{id:"setting-up-additional-aws-services"},"Setting Up Additional AWS Services"),(0,i.kt)("p",null,"To complete the setup, you need to configure several AWS services:"),(0,i.kt)("h3",{id:"setting-up-a-new-public-hosted-zone-on-route-53"},"Setting Up a New Public Hosted Zone on Route 53"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Log in to the AWS Management Console.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Navigate to Route 53:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},'Go to the Route 53 dashboard and click on "Hosted zones."'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Create a New Hosted Zone:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},'Click on "Create Hosted Zone."'),(0,i.kt)("li",{parentName:"ul"},'Enter your domain name and select "Public Hosted Zone."'),(0,i.kt)("li",{parentName:"ul"},'Click on "Create."'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Update Your Domain Registrar:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Note the name servers provided by Route 53."),(0,i.kt)("li",{parentName:"ul"},"Update your domain registrar with these name servers to link your domain to the hosted zone.")))),(0,i.kt)("h3",{id:"setting-up-an-acm-wildcard-certificate"},"Setting Up an ACM Wildcard Certificate"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Navigate to the ACM Dashboard:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Go to the ACM (AWS Certificate Manager) dashboard in the AWS Management Console."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Request a Certificate:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},'Click on "Request a certificate."'),(0,i.kt)("li",{parentName:"ul"},'Select "Request a public certificate."'),(0,i.kt)("li",{parentName:"ul"},"Enter your domain name as ",(0,i.kt)("inlineCode",{parentName:"li"},"*.yourdomain.com")," to request a wildcard certificate."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Validate the Certificate:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Choose DNS validation."),(0,i.kt)("li",{parentName:"ul"},"Add the provided CNAME records to your DNS configuration in Route 53."),(0,i.kt)("li",{parentName:"ul"},"Once AWS validates the records, your certificate will be issued.")))),(0,i.kt)("h3",{id:"setting-up-an-iam-user-with-admin-access"},"Setting Up an IAM User with Admin Access"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Navigate to the IAM Dashboard:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Go to the IAM (Identity and Access Management) dashboard in the AWS Management Console."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Create a New User:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},'Click on "Users" and then "Add user."'),(0,i.kt)("li",{parentName:"ul"},'Enter a username and select "Programmatic access."'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Set Permissions:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},'Attach the "AdministratorAccess" policy to the user.'),(0,i.kt)("li",{parentName:"ul"},'Click on "Next: Tags" and then "Next: Review."'),(0,i.kt)("li",{parentName:"ul"},'Click on "Create user."'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Save Access Credentials:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Save the access key ID and secret access key. You will need these for CircleCI.")))),(0,i.kt)("h3",{id:"setting-up-aws-credentials-in-circleci-project-settings"},"Setting Up AWS Credentials in CircleCI Project Settings"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Navigate to Your CircleCI Project:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Go to the CircleCI dashboard and select your project."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Add Environment Variables:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},'Go to "Project Settings" and then "Environment Variables."'),(0,i.kt)("li",{parentName:"ul"},"Add the following variables with your AWS credentials:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"AWS_ACCESS_KEY_ID")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"AWS_SECRET_ACCESS_KEY")))))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Configure Additional Variables:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Add any additional environment variables required for your deployment, such as ",(0,i.kt)("inlineCode",{parentName:"li"},"SSL_ARN")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"OFFICE_IP_CODE"),".")))))}d.isMDXComponent=!0}}]);